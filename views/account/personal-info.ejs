<%- include('../includes/header.ejs') %>

<body>
    <%- include('../includes/navigation.ejs') %>

    <!--=============================
        PAGE HEADING START
    ==============================-->
    <section>
        <div class="account_overly">
            <div class="container">
                <div class="row">
                    <div class="col-10 d-flex flex-wrap justify-content-between">
                        <div class="account_heading_text account_breadcrumbs">
                            <nav style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb">
                                <ol class="breadcrumb">
                                    <li class="breadcrumb-item"><a class="bc_black" href="/account">Account</a></li>
                                    <li class="breadcrumb-item active" aria-current="page">Personal Info</li>
                                </ol>
                            </nav>
                            <h1>Personal Info</h1>
                            <input type="hidden" name="user" id="user" value="<%= user._id %>">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!--=============================
        PAGE HEADING END
    ==============================-->

    <!--=============================
        CONTENT START
    ==============================-->
    <section class="account_container mt-3">
        <div class="container">
            <div class="row">
                <div class="col-xl-7 me-5">
                    <div class="row">
                        <div class="account_content">
                            <div class="account_options wow fadeInUp" data-wow-duration="1.5s">
                                <div class="account_option_item">
                                    <div class="account_option_item_text">
                                        <h3>
                                            Name
                                            <span class="edit_link" id="name">Edit</span>
                                        </h3>
                                        <div class="label_name">
                                            <p><%=user.firstName + ' ' + user.lastName %></p>
                                        </div>
                                        <div class="row account_form hidden form_name">
                                            <div class="col">
                                                <input type="text" name="firstName" id="firstName" placeholder="First Name" value="<%= user.firstName %>">
                                                    <p class="hidden error_text firstName_error"><i class="fas fa-exclamation-triangle"></i> Please enter a first name</p>
                                            </div>
                                            <div class="col">
                                                <input type="text" name="lastName" id="lastName" placeholder="Last Name" value="<%= user.lastName %>">
                                                    <p class="hidden error_text lastName_error"><i class="fas fa-exclamation-triangle"></i> Please enter a last name</p>
                                            </div>
                                        </div>
                                        <div class="row account_form hidden button_name">
                                            <div class="col">
                                                <button class="common_btn" id="submit_name" type="submit">Update</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-xl-4 col-md-7">
                    <div class="property_sidebar sticky_sidebar wow fadeInUp" data-wow-duration="1.5s">
                        <div class="sidebar_search sidebar_wizerd">
                            <h3>search</h3>
                            <form action="#">
                                <input type="text" placeholder="Search">
                                <button type="submit"><i class="far fa-search"></i></button>
                            </form>
                        </div>
                        <div class="sidebar_dropdown sidebar_wizerd">
                            <h3>Type</h3>
                            <select class="select_2" name="state">
                                <option value="">Select Type</option>
                                <option value="">Sell</option>
                                <option value="">Rent</option>
                                <option value="">Buy</option>
                            </select>
                        </div>                       
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!--=============================
        CONTENT END
    ==============================-->

    <%- include('../includes/footer.ejs') %>
    <script src="/assets/js/flatpickr.js"></script>
    <script src="/assets/js/personalInfo.js"></script>
    

    <script>


        // const profileInput = $('#profilePicture');

        // profileInput.change(function (e) {
        //     file = this.files[0];
        //     if (file) {
        //         let validExtensions = ['image/jpeg', 'image/jpg', 'image/png'];
        //         let fileType = file.type;
        //         if (validExtensions.includes(fileType)) {
        //             let reader = new FileReader();
        //             reader.onload = function (event) {
        //                 $('#profilePreview').attr('src', event.target.result);
        //             };
        //             reader.readAsDataURL(file);
        //             $('.hidden').show();
        //         }
        //     }
        // });

        // $(document).on('click', '.profile-delete', function () {
        //     $('.hidden').hide();
        //     profileInput.val('');
        // });

        // $('#gender').select2({
        //     placeholder: "Select a gender",
        //     minimumResultsForSearch: 10,
        //     allowClear: true
        // });

        // $('#country').select2({
        //     placeholder: "Select a country",
        //     minimumResultsForSearch: 10,
        //     allowClear: true
        // });

        // console.log($('#country').val())

        // $('#state').select2({
        //     placeholder: "Select a state",
        //     minimumResultsForSearch: 10,
        //     allowClear: true
        // });

        // let maxDate = new Date(); 
        // maxDate.setFullYear(maxDate.getFullYear() - 18);

        // $("#dateOfBirth").flatpickr({
        //     altInput: true,
        //     altFormat: 'J F, Y',
        //     dateFormat: 'Y-m-d',
        //     maxDate: maxDate
        // });

        // $("#country").on( "change", function(event) {
        //     if(this.value) {
        //         getStates(this.value);
        //     } else {
        //         clearStates();
        //     }
        // });

        // function clearStates(countryId) {
        //     let html = '<option></option>';
        //     document.getElementById('state').innerHTML = html;
        //     $('#state').val(null).trigger('change');
        // }

        // async function getStates(countryId) {
        //     let jsonStates;
        //     try {
        //         const returnedStates = await fetch(
        //             '/config/getStates?country=' + countryId
        //         );
        //         jsonStates = await returnedStates.json();
        //         states = jsonStates.data;
        //     } catch (e) {
        //         alert(e);
        //         throw new Error(e);
        //     }

        //     let html = '<option></option>';
        //     for (let state of states) {
        //         html += '<option value="' + state._id + '">' + state.name + '</option>';
        //     }

        //     document.getElementById('state').innerHTML = html;
        // }

    </script>

</body>

</html>